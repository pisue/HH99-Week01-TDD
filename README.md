# HH99-Week01-TDD
[ 1μ£Όμ°¨ κ³Όμ  ] TDD λ΅ κ°λ°ν•κΈ° 

## π”¥ TODO
- Default
  - [X] `/point` ν¨ν‚¤μ§€ (λ””λ ‰ν† λ¦¬) λ‚΄μ— `PointService` κΈ°λ³Έ κΈ°λ¥ μ‘μ„±
  - [X] `/database` ν¨ν‚¤μ§€μ κµ¬ν„μ²΄λ” μμ •ν•μ§€ μ•κ³ , μ΄λ¥Ό ν™μ©ν•΄ κΈ°λ¥μ„ κµ¬ν„
  - [X] PATCH  `/point/{id}/charge` : ν¬μΈνΈλ¥Ό μ¶©μ „ν•λ‹¤.
  - [X] PATCH `/point/{id}/use` : ν¬μΈνΈλ¥Ό μ‚¬μ©ν•λ‹¤.
  - [X] GET `/point/{id}` : ν¬μΈνΈλ¥Ό μ΅°νν•λ‹¤.
  - [X] GET `/point/{id}/histories` : ν¬μΈνΈ λ‚΄μ—­μ„ μ΅°νν•λ‹¤.
- Step1
  - [X] ν¬μΈνΈ μ¶©μ „, μ‚¬μ©μ— λ€ν• μ •μ±… μ¶”κ°€ (μ”κ³  λ¶€μ΅±, μµλ€ μ”κ³  λ“±)
  - [X] λ™μ‹μ— μ—¬λ¬ μ”μ²­μ΄ λ“¤μ–΄μ¤λ”λΌλ„ μμ„λ€λ΅ (νΉμ€ ν•λ²μ— ν•λ‚μ μ”μ²­μ”©λ§) μ μ–΄λ  μ μλ„λ΅ λ¦¬ν©ν† λ§
  - [X] λ™μ‹μ„± μ μ–΄μ— λ€ν• ν†µν•© ν…μ¤νΈ μ‘μ„±
- Step2
  - [ ] λ™μ‹μ„± μ μ–΄ λ°©μ‹μ— λ€ν• λ¶„μ„ λ° λ³΄κ³ μ„ μ‘μ„± ( README.md )
 
## λ™μ‹μ„± μ μ–΄ λ°©μ‹μ— λ€ν• λ¶„μ„ λ° λ³΄κ³ μ„
PointService ν΄λμ¤λ” λ‹¤μκ³Ό κ°™μ€ λ‘ κ°€μ§€ μ£Όμ” λ™μ‘μ„ μν–‰ν•©λ‹λ‹¤:

- ν¬μΈνΈ μ¶©μ „ (`charge()`): μ‚¬μ©μμ ν¬μΈνΈλ¥Ό μ¦κ°€μ‹ν‚΄
- ν¬μΈνΈ μ‚¬μ© (`use()`): μ‚¬μ©μμ ν¬μΈνΈλ¥Ό κ°μ†μ‹ν‚΄

``μ΄ λ‘ λ©”μ„λ“λ” μ‚¬μ©μλ³„ ν¬μΈνΈ μ”μ•΅μ„ μμ •ν•κΈ° λ•λ¬Έμ— λ™μ‹μ— μ—¬λ¬ μ“°λ λ“κ°€ λ™μΌν• μ‚¬μ©μμ ν¬μΈνΈμ— μ ‘κ·Όν•  κ²½μ° λ°μ΄ν„° λ¶μΌμΉ λ¬Έμ κ°€ λ°μƒν•  μ μμµλ‹λ‹¤.``

### λ™μ‹μ„± μ μ–΄ λ°©μ‹

λ™μ‹μ„± λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ PointServiceμ—μ„λ” ReentrantLockμ„ μ‚¬μ©ν•μ—¬ μμ›(μ‚¬μ©μμ ν¬μΈνΈ)μ— λ€ν• μ ‘κ·Όμ„ μ μ–΄ν•κ³  μμµλ‹λ‹¤.
μ΄ λ°©μ‹μ€ λ™μΌν• μ‚¬μ©μμ— λ€ν•΄ charge() λλ” use() λ©”μ„λ“κ°€ νΈμ¶λ  λ•,
ν•λ‚μ μ“°λ λ“λ§ μμ›μ— μ ‘κ·Όν•λ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.

### ReentrantLockμ μ‚¬μ©

`charge()` λ° `use()` λ©”μ„λ“μ—μ„λ” κ°κ° `lock.lock()`μ„ ν†µν•΄ λ½μ„ νλ“ν•κ³ , λ©”μ„λ“κ°€ λλ‚ ν›„μ—λ” `finally` λΈ”λ΅μ—μ„ `lock.unlock()`μ„ νΈμ¶ν•μ—¬ λ½μ„ ν•΄μ ν•©λ‹λ‹¤.
μ΄λ” Javaμ ReentrantLockμ„ μ‚¬μ©ν• μ „ν•μ μΈ λ™μ‹μ„± μ μ–΄ λ°©μ‹μΌλ΅, μμ™Έκ°€ λ°μƒν•κ±°λ‚ μ •μƒ μΆ…λ£λλ” κ²½μ°μ—λ„ ν•­μƒ λ½μ΄ ν•΄μ λλ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤

- `ConcurrentHashMap`κ³Ό κ°™μ€ κµ¬μ΅°λ¥Ό μ‚¬μ©ν•΄ κ° μ‚¬μ©μ IDλ³„λ΅ λ½μ„ κ΄€λ¦¬ν•¨μΌλ΅μ¨, λ™μΌν• μ‚¬μ©μμ— λ€ν• μ”μ²­λ§ λ™μ‹μ„± μ μ–΄λ¥Ό ν•κ³  λ‹¤λ¥Έ μ‚¬μ©μλ” λ³„λ„λ΅ μ²λ¦¬λ  μ μμµλ‹λ‹¤.

